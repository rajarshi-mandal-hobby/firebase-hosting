import type { Timestamp } from 'firebase/firestore';

// Mock timestamp helper
const createMockTimestamp = (date: string): Timestamp => {
  return {
    seconds: Math.floor(new Date(date).getTime() / 1000),
    nanoseconds: 0,
    toDate: () => new Date(date),
    toMillis: () => new Date(date).getTime(),
  } as Timestamp;
};

// Mock Global Settings
export const mockGlobalSettings = {
  floors: ['2nd', '3rd'],
  bedTypes: {
    '2nd': {
      'Bed': 1600,
      'Room': 3200,
      'Special': 2400,
    },
    '3rd': {
      'Bed': 1500,
      'Room': 3000,
    },
  },
  securityDeposit: 1600,
  wifiMonthlyCharge: 30,
  upiPhoneNumber: '+918777529394',
  activememberCounts: {
    total: 17,
    byFloor: {
      '2nd': 10,
      '3rd': 7,
    },
    wifiOptedIn: 12,
  },
  currentBillingMonth: createMockTimestamp('2025-07-01'),
  nextBillingMonth: createMockTimestamp('2025-08-01'),
};

// Mock Admin Data
export const mockAdmins = {
  list: [
    {
      email: 'admin@example.com',
      uid: 'primary-admin-uid',
      role: 'primary' as const,
      addedAt: createMockTimestamp('2025-01-01'),
      addedBy: 'system',
    },
    {
      email: 'secondary@example.com',
      uid: 'secondary-admin-uid',
      role: 'secondary' as const,
      addedAt: createMockTimestamp('2025-02-15'),
      addedBy: 'primary-admin-uid',
    },
  ],
  primaryAdminUid: 'primary-admin-uid',
  maxAdmins: 5,
};

// Mock Members Data (with rentHistory embedded)
export const mockMembers = [
  {
    id: 'member-1',
    name: 'John Doe',
    phone: '+919876543210',
    firebaseUid: 'user-1-firebase-uid',
    fcmToken: null,
    floor: '2nd',
    bedType: 'Bed',
    moveInDate: createMockTimestamp('2024-01-15'),
    securityDeposit: 1000,
    rentAtJoining: 1600,
    advanceDeposit: 1600,
    currentRent: 1600,
    totalAgreedDeposit: 4800,
    outstandingBalance: 1500,
    outstandingNote: 'Pending July electricity bill',
    isActive: true,
    optedForWifi: true,
    leaveDate: null,
    ttlExpiry: null,
    rentHistory: [
      {
        id: '2025-07',
        generatedAt: createMockTimestamp('2025-07-01'),
        rent: 1600,
        electricity: 245,
        wifi: 30,
        previousOutstanding: 1200,
        expenses: [
          { amount: 100, description: 'Repair' },
          { amount: 50, description: 'Maintenance' },
        ],
        totalCharges: 2025,
        amountPaid: 525,
        currentOutstanding: 1500,
        note: 'Pending July electricity bill',
        status: 'Partially Paid',
      },
      {
        id: '2025-06',
        generatedAt: createMockTimestamp('2025-06-01'),
        rent: 1600,
        electricity: 220,
        wifi: 30,
        previousOutstanding: 0,
        expenses: [],
        totalCharges: 1850,
        amountPaid: 1850,
        currentOutstanding: 0,
        note: '',
        status: 'Paid',
      },
      {
        id: '2025-05',
        generatedAt: createMockTimestamp('2025-05-01'),
        rent: 1600,
        electricity: 200,
        wifi: 30,
        previousOutstanding: 0,
        expenses: [
          { amount: 75, description: 'Common Area Cleaning' },
        ],
        totalCharges: 1905,
        amountPaid: 1905,
        currentOutstanding: 0,
        note: '',
        status: 'Paid',
      },
      {
        id: '2025-04',
        generatedAt: createMockTimestamp('2025-04-01'),
        rent: 1600,
        electricity: 180,
        wifi: 30,
        previousOutstanding: 0,
        expenses: [],
        totalCharges: 1810,
        amountPaid: 1300,
        currentOutstanding: 510,
        note: 'Partial payment made',
        status: 'Partially Paid',
      },
      {
        id: '2025-03',
        generatedAt: createMockTimestamp('2025-03-01'),
        rent: 1600,
        electricity: 195,
        wifi: 30,
        previousOutstanding: 510,
        expenses: [
          { amount: 120, description: 'Water Tank Repair' },
        ],
        totalCharges: 2455,
        amountPaid: 2455,
        currentOutstanding: 0,
        note: 'Outstanding cleared',
        status: 'Paid',
      },
      {
        id: '2025-02',
        generatedAt: createMockTimestamp('2025-02-01'),
        rent: 1600,
        electricity: 210,
        wifi: 30,
        previousOutstanding: 0,
        expenses: [],
        totalCharges: 1840,
        amountPaid: 2000,
        currentOutstanding: -160,
        note: 'Advance payment',
        status: 'Overpaid',
      },
      {
        id: '2025-01',
        generatedAt: createMockTimestamp('2025-01-01'),
        rent: 1600,
        electricity: 175,
        wifi: 30,
        previousOutstanding: -160,
        expenses: [
          { amount: 60, description: 'Generator Maintenance' },
        ],
        totalCharges: 1505,
        amountPaid: 1505,
        currentOutstanding: 0,
        note: 'Previous advance adjusted',
        status: 'Paid',
      },
    ],
  },
  {
    id: 'member-2',
    name: 'Jane Smith',
    phone: '+919876543211',
    firebaseUid: null,
    fcmToken: null,
    floor: '3rd',
    bedType: 'Room',
    moveInDate: createMockTimestamp('2024-03-22'),
    securityDeposit: 1600,
    rentAtJoining: 3000,
    advanceDeposit: 3000,
    currentRent: 3000,
    totalAgreedDeposit: 7600,
    outstandingBalance: 0,
    outstandingNote: null,
    isActive: true,
    optedForWifi: true,
    leaveDate: null,
    ttlExpiry: null,
    rentHistory: [
      {
        id: '2025-07',
        generatedAt: createMockTimestamp('2025-07-01'),
        rent: 3000,
        electricity: 270,
        wifi: 30,
        previousOutstanding: 0,
        expenses: [],
        totalCharges: 3300,
        amountPaid: 3300,
        currentOutstanding: 0,
        note: '',
        status: 'Paid',
      },
      {
        id: '2025-06',
        generatedAt: createMockTimestamp('2025-06-01'),
        rent: 3000,
        electricity: 250,
        wifi: 30,
        previousOutstanding: 0,
        expenses: [
          { amount: 150, description: 'Room Deep Cleaning' },
        ],
        totalCharges: 3430,
        amountPaid: 3430,
        currentOutstanding: 0,
        note: '',
        status: 'Paid',
      },
      {
        id: '2025-05',
        generatedAt: createMockTimestamp('2025-05-01'),
        rent: 3000,
        electricity: 240,
        wifi: 30,
        previousOutstanding: 0,
        expenses: [],
        totalCharges: 3270,
        amountPaid: 3270,
        currentOutstanding: 0,
        note: '',
        status: 'Paid',
      },
    ],
  },
  {
    id: 'member-3',
    name: 'Mike Wilson',
    phone: '+919876543212',
    firebaseUid: 'user-3-firebase-uid',
    fcmToken: null,
    floor: '2nd',
    bedType: 'Room',
    moveInDate: createMockTimestamp('2024-02-10'),
    securityDeposit: 1600,
    rentAtJoining: 3200,
    advanceDeposit: 3200,
    currentRent: 3200,
    totalAgreedDeposit: 8000,
    outstandingBalance: -200,
    outstandingNote: 'Advance payment credit',
    isActive: true,
    optedForWifi: false,
    leaveDate: null,
    ttlExpiry: null,
    rentHistory: [
      {
        id: '2025-07',
        generatedAt: createMockTimestamp('2025-07-01'),
        rent: 3200,
        electricity: 280,
        wifi: 0,
        previousOutstanding: -200,
        expenses: [],
        totalCharges: 3280,
        amountPaid: 3280,
        currentOutstanding: -200,
        note: 'Credit balance carried forward',
        status: 'Overpaid',
      },
      {
        id: '2025-06',
        generatedAt: createMockTimestamp('2025-06-01'),
        rent: 3200,
        electricity: 260,
        wifi: 0,
        previousOutstanding: 0,
        expenses: [],
        totalCharges: 3460,
        amountPaid: 3660,
        currentOutstanding: -200,
        note: 'Advance payment',
        status: 'Overpaid',
      },
    ],
  },
  {
    id: 'member-4',
    name: 'Sarah Johnson',
    phone: '+919876543213',
    firebaseUid: null,
    fcmToken: null,
    floor: '3rd',
    bedType: 'Bed',
    moveInDate: createMockTimestamp('2024-05-01'),
    securityDeposit: 1600,
    rentAtJoining: 1500,
    advanceDeposit: 1500,
    currentRent: 1500,
    totalAgreedDeposit: 4600,
    outstandingBalance: 3200,
    outstandingNote: 'Two months pending',
    isActive: true,
    optedForWifi: true,
    leaveDate: null,
    ttlExpiry: null,
  },
  {
    id: 'member-5',
    name: 'David Brown',
    phone: '+919876543214',
    firebaseUid: null,
    fcmToken: null,
    floor: '2nd',
    bedType: 'Special',
    moveInDate: createMockTimestamp('2024-04-10'),
    securityDeposit: 1600,
    rentAtJoining: 2400,
    advanceDeposit: 2400,
    currentRent: 2400,
    totalAgreedDeposit: 6400,
    outstandingBalance: 0,
    outstandingNote: null,
    isActive: false,
    optedForWifi: false,
    leaveDate: createMockTimestamp('2025-06-30'),
    ttlExpiry: createMockTimestamp('2025-12-30'),
  },
];

// Mock Electric Bills Data
export const mockElectricBills = [
  {
    id: '2025-07',
    billingMonth: createMockTimestamp('2025-07-01'),
    generatedAt: createMockTimestamp('2025-07-01'),
    lastUpdated: createMockTimestamp('2025-07-01'),
    floorCosts: {
      '2nd': {
        bill: 2450,
        totalMembers: 10,
      },
      '3rd': {
        bill: 1890,
        totalMembers: 7,
      },
    },
    appliedBulkExpenses: [
      {
        members: ['member-1', 'member-2'],
        amount: 500,
        description: 'Common area maintenance',
      },
    ],
  },
];

// Current user context (for Phase 1 testing)
export const mockCurrentUser = {
  uid: 'user-1-firebase-uid',
  email: 'john.doe@example.com',
  displayName: 'John Doe',
  photoURL: 'https://lh3.googleusercontent.com/a/default-user=s96-c',
  role: 'member' as 'admin' | 'member',
  linkedMemberId: 'member-1',
};

// For admin testing
export const mockAdminUser = {
  uid: 'primary-admin-uid',
  email: 'admin@example.com',
  displayName: 'Admin User',
  photoURL: 'https://lh3.googleusercontent.com/a/admin-user=s96-c',
  role: 'admin' as 'admin' | 'member',
  linkedMemberId: null,
};
